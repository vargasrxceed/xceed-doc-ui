"use strict";(self.webpackChunkxceed_doc_ui=self.webpackChunkxceed_doc_ui||[]).push([[3972],{2215:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>c,toc:()=>u});var t=r(4848),l=r(8453),a=r(1470),o=r(9365);const i={},s="Spanned Cells",c={id:"fundamentals/views-themes/views/table-tableflow-treegrid-view/spanned-cell",title:"Spanned Cells",description:"DataCells can be merged together to display a common value, this results into a SpannedCell. These cells can span horizontally, vertically, or both. Cells will span automatically when adjacent values are equal.",source:"@site/datagrid/fundamentals/views-themes/views/table-tableflow-treegrid-view/spanned-cell.md",sourceDirName:"fundamentals/views-themes/views/table-tableflow-treegrid-view",slug:"/fundamentals/views-themes/views/table-tableflow-treegrid-view/spanned-cell",permalink:"/xceed-doc-ui/datagrid/fundamentals/views-themes/views/table-tableflow-treegrid-view/spanned-cell",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"sidebardatagrid",previous:{title:"Merged Column Headers",permalink:"/xceed-doc-ui/datagrid/fundamentals/views-themes/views/table-tableflow-treegrid-view/merged-column-header"},next:{title:"View Properties",permalink:"/xceed-doc-ui/datagrid/fundamentals/views-themes/views/table-tableflow-treegrid-view/view-properties"}},d={},u=[];function p(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"spanned-cells",children:"Spanned Cells"})}),"\n",(0,t.jsx)(n.p,{children:"DataCells can be merged together to display a common value, this results into a SpannedCell. These cells can span horizontally, vertically, or both. Cells will span automatically when adjacent values are equal."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"SpannedCells",src:r(9445).A+"",width:"1013",height:"460"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.em,{children:[(0,t.jsx)(n.strong,{children:"Figure 1:"})," Example of a grid using both horizontal and vertical Spanned Cells"]})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"TableView.AllowCellSpanning"})," property must be set to true to activate cell spanning."]}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Column.CellSpanningDirection"})," is used to set how particular cells span. In order to span cells vertically, the corresponding columns must be set to C",(0,t.jsx)(n.code,{children:"ellSpanningDirection.Row"}),". To have cells span horizontally, the corresponding columns must be set to ",(0,t.jsx)(n.code,{children:"CellSpanningDirecton.Column.Cells"})," can span in both direction by setting the Column.",(0,t.jsx)(n.code,{children:"CellSpanningDirection"})," property to ",(0,t.jsx)(n.code,{children:"CellSpanningDirection.Both"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["There can be conflicts between cells wanting to span horizontally and vertically. In such scenarios, a priority is given to row spanning (vertical). In order to change the default behavior and give priority to column spanning (horizontal), use the ",(0,t.jsx)(n.code,{children:"DataGridControl.SpannedCellConflictResolutionMode"})," property."]})}),"\n",(0,t.jsxs)(n.p,{children:["A spanning cell can be customized in different ways. First, to change its appearance, you can provide an implicit style on ",(0,t.jsx)(n.code,{children:"SpannedCell"})," (see example 1)."]}),"\n",(0,t.jsxs)(n.p,{children:["Second, a configuration can be furnished. Use the ",(0,t.jsx)(n.code,{children:"DataGridControl.SpannedCellConfigurationSelector"})," property to provide a ",(0,t.jsx)(n.code,{children:"SpannedCellConfiguration"}),", on which you can set the following properties: ",(0,t.jsx)(n.code,{children:"ContentTemplate"}),", ",(0,t.jsx)(n.code,{children:"ContentTemplateSelector"}),", ",(0,t.jsx)(n.code,{children:"ContentStringFormat"}),", ",(0,t.jsx)(n.code,{children:"HorizontalContentAlignement"}),", and ",(0,t.jsx)(n.code,{children:"VerticalContentAlignement"})," (see example 2)."]}),"\n",(0,t.jsxs)(n.p,{children:["Third, cells can be set to span on criteria other then being of equal value. In order to customize how cells span, use the ",(0,t.jsx)(n.code,{children:"DataGridControl.SpannedCellSelector"})," property to provide a ",(0,t.jsx)(n.code,{children:"SpannedCellSelector"}),". Then override its ",(0,t.jsx)(n.code,{children:"CanMerge"})," method to provide the rules used to determine if two SpannedCellFragments can be merged to create a ",(0,t.jsx)(n.code,{children:"SpannedCell"}),", and override its SelectContent method to provide the rules used to determine the content displayed in the ",(0,t.jsx)(n.code,{children:"SpannedCell"})," (see example 3)."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"In a master detail scenario, the CellSpanningDirection must be set on the each DetailConfiguration\u2019s columns. Moreover, the SpannedCellConflictResolutionMode, SpannedCellConfigurationSelector, and SpannedCellSelector properties must be set on the corresponding DetailConfiguration class for custom cell spanning to happen at the detail level."})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"In TreeGridflowView, by default cells will span at all detail levels. In order to change this behavior, the TreeGridflowView.AllowMultiContextCellSpanning property must be set to false, OR the SpannedCellSelector.CanMergeMultipleContexts property must be set to false."})}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"SpannedCells cannot be edited, but selecting a row or a cell within a SpannedCell will break the spanning for the selected row or cell, and will then become editable."}),"\n",(0,t.jsx)(n.li,{children:"SpannedCells cannot be exported or printed, the underlying DataCells will be used."}),"\n",(0,t.jsx)(n.li,{children:"Cell spanning is not supported in CardView and 3Dview."}),"\n"]})}),"\n",(0,t.jsx)(n.p,{children:"Examples\r\nAll examples in this topic assume that the grid is bound to the Orders table of the Northwind database, unless stated otherwise."}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Example 1: Styling Spanned Cells"}),(0,t.jsx)(n.p,{children:"The following example demonstrates how to change the background and set a border around spanned cells through a style."}),(0,t.jsx)(a.A,{children:(0,t.jsx)(o.A,{value:"xaml",label:"XAML",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'  <Grid xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid">\r\n    <Grid.Resources>\r\n      <xcdg:DataGridCollectionViewSource x:Key="cvs_orders"\r\n                                        Source="{Binding Source={x:Static Application.Current}, Path=Orders}" />\r\n        <Style x:Key="spannedCellBorderStyle"\r\n              TargetType="{x:Type Border}">\r\n          <Setter Property="Background"\r\n                  Value="LightBlue" />\r\n          <Setter Property="BorderBrush"\r\n                  Value="DarkBlue" />\r\n          <Setter Property="BorderThickness"\r\n                  Value="1" />\r\n        </Style>\r\n        <Style TargetType="{x:Type xcdg:SpannedCell}">\r\n          <Setter Property="CellContainerStyle"\r\n                  Value="{StaticResource spannedCellBorderStyle}" />\r\n        </Style>\r\n      </Grid.Resources>\r\n      <xcdg:DataGridControl ItemsSource="{Binding Source={StaticResource cvs_orders}}">\r\n        <xcdg:DataGridControl.View>\r\n          <xcdg:TableView AllowCellSpanning="True" />\r\n        </xcdg:DataGridControl.View>\r\n        <xcdg:DataGridControl.Columns>\r\n          <xcdg:Column FieldName="ShipCountry"\r\n                      CellSpanningDirection="Row" />\r\n      </xcdg:DataGridControl.Columns>\r\n    </xcdg:DataGridControl>\r\n  </Grid>\n'})})})})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Example 2: Configuring Spanned Cells"}),(0,t.jsx)(n.p,{children:"The following example demonstrates how to center vertical and horizontal content alignment through a SpannedCellConfigurationSelector."}),(0,t.jsxs)(a.A,{children:[(0,t.jsx)(o.A,{value:"xaml",label:"XAML",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'  <Grid xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid">\r\n    <Grid.Resources>\r\n      <xcdg:DataGridCollectionViewSource x:Key="cvs_orders"\r\n                                        Source="{Binding Source={x:Static Application.Current}, Path=Orders}" />\r\n      <xcdg:CustomSpannedCellConfigurationSelector x:Key="configurationSelector" />\r\n    </Grid.Resources>\r\n    <xcdg:DataGridControl ItemsSource="{Binding Source={StaticResource cvs_orders}}"\r\n                          SpannedCellSelector="{StaticResource configurationSelector}">\r\n      <xcdg:DataGridControl.View>\r\n        <xcdg:TableView AllowCellSpanning="True" />\r\n      </xcdg:DataGridControl.View>\r\n      <xcdg:DataGridControl.Columns>\r\n        <xcdg:Column FieldName="ShipCountry"\r\n                    CellSpanningDirection="Row" />\r\n      </xcdg:DataGridControl.Columns>\r\n    </xcdg:DataGridControl>\r\n  </Grid>\n'})})}),(0,t.jsx)(o.A,{value:"csharp",label:"C#",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:"  public sealed class CustomSpannedCellConfigurationSelector : SpannedCellConfigurationSelector\r\n  {\r\n    public override ISpannedCellConfiguration SelectConfiguration(object content, IEnumerable<SpannedCellFragment> fragments)\r\n    {\r\n      return new SpannedCellConfiguration() { HorizontalContentAlignment = HorizontalAlignment.Center, VerticalContentAlignment = VerticalAlignment.Center };\r\n    }\r\n  }\n"})})})]})]}),"\n",(0,t.jsxs)(i,{children:[(0,t.jsx)("summary",{children:"Example 3: Creating a Custom Spanning"}),(0,t.jsx)(n.p,{children:"The following example demonstrates how to span cells across a range of values."}),(0,t.jsxs)(a.A,{children:[(0,t.jsx)(o.A,{value:"xaml",label:"XAML",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'    <Grid xmlns:xcdg="http://schemas.xceed.com/wpf/xaml/datagrid">\r\n      <Grid.Resources>\r\n        <xcdg:DataGridCollectionViewSource x:Key="cvs_orders"\r\n                                          Source="{Binding Source={x:Static Application.Current}, Path=Orders}" />\r\n        <local:CustomSpannedCellSelector x:Key="spannedCellSelector" />\r\n      </Grid.Resources>\r\n      <xcdg:DataGridControl ItemsSource="{Binding Source={StaticResource cvs_orders}}"\r\n                            SpannedCellSelector="{StaticResource spannedCellSelector}">\r\n        <xcdg:DataGridControl.View>\r\n          <xcdg:TableView AllowCellSpanning="True" />\r\n        </xcdg:DataGridControl.View>\r\n        <xcdg:DataGridControl.Columns>\r\n          <xcdg:Column FieldName="Freight"\r\n                      CellSpanningDirection="Row" />\r\n        </xcdg:DataGridControl.Columns>\r\n      </xcdg:DataGridControl>\r\n    </Grid> \n'})})}),(0,t.jsx)(o.A,{value:"csharp",label:"C#",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-csharp",children:'  public sealed class CustomSpannedCellSelector : SpannedCellSelector\r\n  {\r\n    private const decimal Range = 10m;\r\n    public override bool CanMerge(SpannedCellFragment x, SpannedCellFragment y)\r\n    {\r\n      if ((x.Column == y.Column) && (x.Column.FieldName == "Freight"))\r\n      {\r\n        var xBound = this.GetLowerBound(x);\r\n        var yBound = this.GetLowerBound(y);\r\n        return xBound.HasValue\r\n              && yBound.HasValue\r\n              && (xBound.Value == yBound.Value);\r\n      }\r\n      return false;\r\n    }\r\n    public override object SelectContent(IEnumerable<SpannedCellFragment> fragments)\r\n    {\r\n      var first = fragments.FirstOrDefault();\r\n      var bound = (first != null) ? this.GetLowerBound(first) : null;\r\n      if (!bound.HasValue)\r\n        return null;\r\n      return string.Format("{0} - {1}", bound.Value, bound.Value + Range);\r\n    }\r\n    private decimal? GetLowerBound(SpannedCellFragment x)\r\n    {\r\n      var content = x.Content;\r\n      if (!(content is decimal))\r\n        return null;\r\n      var value = (decimal)content;\r\n      return Math.Floor(value / Range) * Range;\r\n    }\r\n  }\n'})})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},9365:(e,n,r)=>{r.d(n,{A:()=>o});r(6540);var t=r(4164);const l={tabItem:"tabItem_Ymn6"};var a=r(4848);function o(e){let{children:n,hidden:r,className:o}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,t.A)(l.tabItem,o),hidden:r,children:n})}},1470:(e,n,r)=>{r.d(n,{A:()=>w});var t=r(6540),l=r(4164),a=r(3104),o=r(6347),i=r(205),s=r(7485),c=r(1682),d=r(679);function u(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:r}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:r,attributes:t,default:l}}=e;return{value:n,label:r,attributes:t,default:l}}))}(r);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,r])}function h(e){let{value:n,tabValues:r}=e;return r.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:r}=e;const l=(0,o.W6)(),a=function(e){let{queryString:n=!1,groupId:r}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:n,groupId:r});return[(0,s.aZ)(a),(0,t.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(l.location.search);n.set(a,e),l.replace({...l.location,search:n.toString()})}),[a,l])]}function g(e){const{defaultValue:n,queryString:r=!1,groupId:l}=e,a=p(e),[o,s]=(0,t.useState)((()=>function(e){let{defaultValue:n,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const t=r.find((e=>e.default))??r[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:a}))),[c,u]=m({queryString:r,groupId:l}),[g,x]=function(e){let{groupId:n}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(n),[l,a]=(0,d.Dv)(r);return[l,(0,t.useCallback)((e=>{r&&a.set(e)}),[r,a])]}({groupId:l}),C=(()=>{const e=c??g;return h({value:e,tabValues:a})?e:null})();(0,i.A)((()=>{C&&s(C)}),[C]);return{selectedValue:o,selectValue:(0,t.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);s(e),u(e),x(e)}),[u,x,a]),tabValues:a}}var x=r(2303);const C={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=r(4848);function b(e){let{className:n,block:r,selectedValue:t,selectValue:o,tabValues:i}=e;const s=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),d=e=>{const n=e.currentTarget,r=s.indexOf(n),l=i[r].value;l!==t&&(c(n),o(l))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=s.indexOf(e.currentTarget)+1;n=s[r]??s[0];break}case"ArrowLeft":{const r=s.indexOf(e.currentTarget)-1;n=s[r]??s[s.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":r},n),children:i.map((e=>{let{value:n,label:r,attributes:a}=e;return(0,f.jsx)("li",{role:"tab",tabIndex:t===n?0:-1,"aria-selected":t===n,ref:e=>s.push(e),onKeyDown:u,onClick:d,...a,className:(0,l.A)("tabs__item",C.tabItem,a?.className,{"tabs__item--active":t===n}),children:r??n},n)}))})}function S(e){let{lazy:n,children:r,selectedValue:a}=e;const o=(Array.isArray(r)?r:[r]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function v(e){const n=g(e);return(0,f.jsxs)("div",{className:(0,l.A)("tabs-container",C.tabList),children:[(0,f.jsx)(b,{...n,...e}),(0,f.jsx)(S,{...n,...e})]})}function w(e){const n=(0,x.A)();return(0,f.jsx)(v,{...e,children:u(e.children)},String(n))}},9445:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/SpannedCells-d076e652ebbf3c8af321ba26164a87b9.png"},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>i});var t=r(6540);const l={},a=t.createContext(l);function o(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);