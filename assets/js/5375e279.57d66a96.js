"use strict";(self.webpackChunkxceed_doc_ui=self.webpackChunkxceed_doc_ui||[]).push([[2738],{7865:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var a=r(4848),n=r(8453),i=r(1470),s=r(9365);const o={},l="Providing Data",c={id:"listbox/02",title:"Providing Data",description:"Xceed Ultimate ListBox provides built-in support for WCF Data and for any local data source that implements IEnumerable. In order to populate a listbox with data items, its ItemsSource property must be bound to a property that exposes the data. Once the data items are loaded into a listbox, they can be grouped, sorted, and searched.",source:"@site/docs/listbox/02.md",sourceDirName:"listbox",slug:"/listbox/02",permalink:"/xceed-doc-ui/docs/listbox/02",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Listbox control",permalink:"/xceed-doc-ui/docs/listbox/01"},next:{title:"Custom Data Sources",permalink:"/xceed-doc-ui/docs/listbox/03"}},h={},d=[{value:"Local Data Sources",id:"local-data-sources",level:2},{value:"What is Data Virtualization?",id:"what-is-data-virtualization",level:2},{value:"The Data-Virtualization Engine",id:"the-data-virtualization-engine",level:2}];function u(e){const t={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"providing-data",children:"Providing Data"})}),"\n",(0,a.jsxs)(t.p,{children:["Xceed Ultimate ListBox provides built-in support for WCF Data and for any local data source that implements ",(0,a.jsx)(t.strong,{children:"IEnumerable"}),". In order to populate a listbox with data items, its ",(0,a.jsx)(t.code,{children:"ItemsSource"})," property must be bound to a property that exposes the data. Once the data items are loaded into a listbox, they can be grouped, sorted, and searched."]}),"\n",(0,a.jsx)(t.h2,{id:"local-data-sources",children:"Local Data Sources"}),"\n",(0,a.jsxs)(t.p,{children:["When providing data to a listbox using a local data source, the ",(0,a.jsx)(t.strong,{children:"ItemsSource"})," property must be bound to a property that exposes the data."]}),"\n",(0,a.jsxs)(t.p,{children:["The following example demonstrates how to bind the listbox to a generic ",(0,a.jsx)(t.strong,{children:"ObservableCollection"})," of ",(0,a.jsx)(t.em,{children:(0,a.jsx)(t.strong,{children:"Person"})})," data items."]}),"\n",(0,a.jsx)(t.admonition,{type:"tip",children:(0,a.jsxs)(t.p,{children:["The ",(0,a.jsx)(t.strong,{children:"DataContext"})," property of the ",(0,a.jsx)(t.em,{children:(0,a.jsx)(t.strong,{children:"MainPage"})})," is set to itself in its constructor."]})}),"\n",(0,a.jsxs)(i.A,{children:[(0,a.jsx)(s.A,{value:"xaml",label:"XAML",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-xml",children:'  <UserControl x:Class="MyApplication.MainPage"\r\n      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"\r\n      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"\r\n      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"\r\n      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\r\n      xmlns:xclb="http://schemas.xceed.com/silverlight/xaml/listbox">\r\n    <UserControl.Resources>\r\n      <DataTemplate x:Key="personDataTemplate">\r\n        <StackPanel Orientation="Horizontal">\r\n          <TextBlock Text="{Binding Path=FirstName}" />\r\n          <TextBlock Text=" " />\r\n          <TextBlock Text="{Binding Path=LastName}"/>\r\n          <TextBlock Text=" is " />\r\n          <TextBlock Text="{Binding Path=Age}"/>\r\n          <TextBlock Text=" years old. (Birthdate = " />\r\n          <TextBlock Text="{Binding Path=BirthDate}"/>\r\n          <TextBlock Text=".)" />\r\n        </StackPanel>\r\n      </DataTemplate>\r\n      <xclb:ListBoxItemConfiguration x:Name="personListBoxItemConfiguration"\r\n                                            ContentTemplate="{StaticResource personDataTemplate}"/>\r\n    </UserControl.Resources>\r\n\r\n    <Grid x:Name="LayoutRoot" Background="White">\r\n      <xclb:ListBox x:Name="listBox"\r\n                    ItemsSource="{Binding}" Height="438" Margin="0,0,0,96">\r\n        <xclb:ListBox.ContainerConfigurations>\r\n          <xclb:ContainerConfigurations ListBoxItemConfiguration="{StaticResource personListBoxItemConfiguration}"/>\r\n        </xclb:ListBox.ContainerConfigurations>\r\n        <xclb:ListBox.GroupDescriptions>\r\n          <PropertyGroupDescription PropertyName="Age"/>\r\n        </xclb:ListBox.GroupDescriptions>\r\n      </xclb:ListBox>\r\n    </Grid>\r\n  </UserControl> \n'})})}),(0,a.jsx)(s.A,{value:"csharp",label:"C#",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:"  // The Person class is a simple class that exposes a FirstName, LastName, Age, and BirthDate properties.\r\n  // Its CreateNewPersonCollection method returns an ObservableCollection<Person> with pre-populated\r\n  // data.\r\n  private ObservableCollection<Person> m_people = null;\r\n  public ObservableCollection<Person> People\r\n  {\r\n    get\r\n    {\r\n        if( m_people == null )\r\n          m_people = Person.CreateNewPersonCollection( 10000 );\r\n        return m_people;\r\n    }\r\n  }\r\n  this.DataContext = People;\n"})})}),(0,a.jsx)(s.A,{value:"vbnet",label:"VB.NET",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-vbnet",children:"' The Person class is a simple class that exposes a FirstName, LastName, Age, and BirthDate properties.\r\n' Its CreateNewPersonCollection method returns an ObservableCollection<Person> with pre-populated\r\n' data.\r\nPrivate m_people As ObservableCollection( Of Person ) = Nothing\r\nPublic ReadOnly Property People As ObservableCollection( Of Person )\r\n  Get\r\n      If m_people Is Nothing Then\r\n        m_people = Person.CreateNewPersonCollection( 10000 )\r\n      End If\r\n      Return m_people\r\n  End Get\r\nEnd Property\r\nMe.DataContext = People\n"})})})]}),"\n",(0,a.jsxs)(t.admonition,{type:"tip",children:[(0,a.jsxs)(t.p,{children:["When a WCF Data Services web service is configured to work with server-side paging, a ",(0,a.jsx)(t.code,{children:"WcfDataServicesDataSourceProvider"})," that provides both the ",(0,a.jsx)(t.code,{children:"DataServiceQuery<T>"})," and the DataServiceContext must be created so that the continuation tokens can be handled. For example:"]}),(0,a.jsxs)(i.A,{children:[(0,a.jsx)(s.A,{value:"csharp",label:"C#",default:!0,children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-csharp",children:'  NorthwindEntities entities = new NorthwindEntities( new Uri( "NorthwindDataService.svc", UriKind.Relative ) ); \r\n  this.PagingOrders = new WcfDataServicesDataSourceProvider( entities.Orders.IncludeTotalCount(), entities );\n'})})}),(0,a.jsx)(s.A,{value:"vbnet",label:"VB.NET",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-vbnet",children:'  Dim entities As New NorthwindEntities( New Uri( "NorthwindDataService.svc", UriKind.Relative ) )\r\n  Me.PagingOrders = New WcfDataServicesDataSourceProvider( entities.Orders.IncludeTotalCount(), entities )\n'})})})]}),(0,a.jsx)(t.h2,{id:"what-is-data-virtualization",children:"What is Data Virtualization?"}),(0,a.jsx)(t.p,{children:'Data virtualization allows partial retrieval of data from a data source on an "as needed" basis. Xceed\'s listbox controls take that basic concept and push it even further by constantly preserving UI responsiveness through asynchronous data retrieval and automatic pre-fetching of data. To make things even better, if your data source is using WCF Data or RIA Services, it all happens behind the scenes! Just pass the data-service or entity query to the listbox control and everything else happens automatically.'}),(0,a.jsx)(t.p,{children:"The whole idea behind the data virtualization capabilities provided by these products is to keep the application responsive at all times, even when data is being retrieved from a remote data source. So, to give you a better idea of what is going on behind the scenes let's take a look at the diagram below."}),(0,a.jsx)(t.p,{children:"When scrolling through the listbox (1), items that are currently not loaded are requested by the listbox from the data-virtualization engine (2). If the engine has a cache of data available, it will be returned immediately and the listbox will simply update to display the data. If data outside of the cache is requested, the request will be passed from the data-virtualization engine (3) to the remote data source where it will be processed (4) and the newly fetched data returned to the engine where it will then be passed to the listbox. In both situations, the listbox will always remain completely responsive."}),(0,a.jsx)(t.p,{children:"In addition, sorting, grouping, and non-predicate filtering are tasks that are performed on the server, further reducing the processing time and transfers needed on the client machine."}),(0,a.jsx)(t.h2,{id:"the-data-virtualization-engine",children:"The Data-Virtualization Engine"}),(0,a.jsx)(t.p,{children:"The data-virtualization engine behind Xceed's listbox controls orchestrates all the behind-the-scenes data management. Although it is the cornerstone on which Xceed's listbox controls were built, in most cases, you will never have to deal with it and will only know that it is working because everything is working so well. To get a little bit more technical, the data-virtualization engine is basically a layer of enumerators that each manipulate and process the data items that are displayed in the listbox, all the while making sure that \"extra\" items are available, just in case."}),(0,a.jsx)(t.p,{children:'Take a look at the image below and consider a simple operation, such as a line down (i.e., "Get(1)"):'}),(0,a.jsx)(t.p,{children:'When the listbox requires new items (1), the request is processed by the data-virtualization engine, which begins its initial pass by querying the caching enumerator to see if it has the data items that are needed (2). If the caching enumerator has the items, they are immediately returned and displayed in the listbox (10). If the caching enumerator does not contain the required items, the request is sent to the async enumerator, which will create and immediately return "dummy" items (3) so that the listbox remains responsive, even though there is a pending request to retrieve new items. The request will then be queued along with any additional pending requests. The async enumerator is also responsible for optimizing the query that is sent to the subsequent enumerators. For example, if three line-down operations are queued, the async enumerator will condense these pending operations into a single "Get(3)" query, thereby only sending one request to the next enumerator rather than three (4). Obviously, if there is only one pending request within a reasonable lapse of time, it will be sent as-is to the next enumerator.'}),(0,a.jsx)(t.p,{children:'Once the async enumerator has optimized the pending queries, the resulting query is sent to the grouping enumerator, which takes care of appending any grouping criteria (i.e., "OrderBy") to the query that is being sent to the data source (5). Once the grouping enumerator has added its requirements, the query is passed to the filtering enumerator, which may also append its filtering criteria if it is using a filter expression (6). If a predicate is being used to filter the items, the information will not be appended to the query and the unmodified query will be sent to the buffering enumerator, which is next in line. The buffering enumerator, which typically contains multiple pages of data that has been fetched from the data source, is the last layer before the query is handed over to the data-source provider. Now, the buffering enumerator has an additional role, which is to make sure that it makes a worthwhile roundtrip to the server. If it realizes that the trip is "not worth it," as in this example of only retrieving three items, it will decide to get more items and keep them in its buffer (7). Once the query exits the data-virtualization engine, the data-source provider takes over and queries the data source using the transformed query (8).'}),(0,a.jsx)(t.p,{children:"All this time, the listbox has remained fully responsive."}),(0,a.jsx)(t.p,{children:"Once the data-source provider receives the items from the data source, they are handed to the buffering enumerator, which passes the items that were requested to the filtering enumerator and buffers the rest for later use. At this point, if a predicate is being used to filter the items, it is possible that the filtering enumerator will reject the items that are received and request more from the buffering enumerator, which grabbed more than was requested. If only a filter expression was used, then the items are passed directly from the filtering to the grouping enumerator. Like the filtering enumerator, it is possible that the grouping enumerator will reject the items."}),(0,a.jsx)(t.p,{children:"After the items have successfully passed the lower enumerators, they are finally transferred to the async enumerator that will replace the dummy items with the actual items, which will then be displayed in the listbox (10)."}),(0,a.jsx)(t.p,{children:"In addition to the enumeration layers, Xceed's listbox controls also actively pre-fetch new items and rebalanc the caching and buffering enumerators while the data-virtualization engine is idle. What this means is that when there are no pending requests in the async enumerator, the engine will actively retrieve new items and make sure that the currently displayed items are moved to the middle of the buffers. In other words, if the currently displayed items are located at the end of the buffer, they will be moved to the middle, the extra items at the top will be cleared, and new items will be fetched to complete the buffer."})]})]})}function p(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},9365:(e,t,r)=>{r.d(t,{A:()=>s});r(6540);var a=r(4164);const n={tabItem:"tabItem_Ymn6"};var i=r(4848);function s(e){let{children:t,hidden:r,className:s}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,a.A)(n.tabItem,s),hidden:r,children:t})}},1470:(e,t,r)=>{r.d(t,{A:()=>j});var a=r(6540),n=r(4164),i=r(3104),s=r(6347),o=r(205),l=r(7485),c=r(1682),h=r(679);function d(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:t,children:r}=e;return(0,a.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:r,attributes:a,default:n}}=e;return{value:t,label:r,attributes:a,default:n}}))}(r);return function(e){const t=(0,c.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,r])}function p(e){let{value:t,tabValues:r}=e;return r.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:r}=e;const n=(0,s.W6)(),i=function(e){let{queryString:t=!1,groupId:r}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:t,groupId:r});return[(0,l.aZ)(i),(0,a.useCallback)((e=>{if(!i)return;const t=new URLSearchParams(n.location.search);t.set(i,e),n.replace({...n.location,search:t.toString()})}),[i,n])]}function b(e){const{defaultValue:t,queryString:r=!1,groupId:n}=e,i=u(e),[s,l]=(0,a.useState)((()=>function(e){let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${r.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=r.find((e=>e.default))??r[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:i}))),[c,d]=m({queryString:r,groupId:n}),[b,f]=function(e){let{groupId:t}=e;const r=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,i]=(0,h.Dv)(r);return[n,(0,a.useCallback)((e=>{r&&i.set(e)}),[r,i])]}({groupId:n}),x=(()=>{const e=c??b;return p({value:e,tabValues:i})?e:null})();(0,o.A)((()=>{x&&l(x)}),[x]);return{selectedValue:s,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,i]),tabValues:i}}var f=r(2303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=r(4848);function v(e){let{className:t,block:r,selectedValue:a,selectValue:s,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),h=e=>{const t=e.currentTarget,r=l.indexOf(t),n=o[r].value;n!==a&&(c(t),s(n))},d=e=>{let t=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;t=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;t=l[r]??l[l.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,n.A)("tabs",{"tabs--block":r},t),children:o.map((e=>{let{value:t,label:r,attributes:i}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>l.push(e),onKeyDown:d,onClick:h,...i,className:(0,n.A)("tabs__item",x.tabItem,i?.className,{"tabs__item--active":a===t}),children:r??t},t)}))})}function y(e){let{lazy:t,children:r,selectedValue:i}=e;const s=(Array.isArray(r)?r:[r]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:(0,n.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==i})))})}function w(e){const t=b(e);return(0,g.jsxs)("div",{className:(0,n.A)("tabs-container",x.tabList),children:[(0,g.jsx)(v,{...t,...e}),(0,g.jsx)(y,{...t,...e})]})}function j(e){const t=(0,f.A)();return(0,g.jsx)(w,{...e,children:d(e.children)},String(t))}},8453:(e,t,r)=>{r.d(t,{R:()=>s,x:()=>o});var a=r(6540);const n={},i=a.createContext(n);function s(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);